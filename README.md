# üîé Bank BIN Checker API

## üìå –û–ø–∏—Å–∞–Ω–∏–µ

–°–µ—Ä–≤–∏—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ **–±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç –ø–æ BIN-–∫–æ–¥—É** (–ø–µ—Ä–≤—ã–µ 6 —Ü–∏—Ñ—Ä –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç—ã).  
–° –µ–≥–æ –ø–æ–º–æ—â—å—é –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å:
- –±–∞–Ω–∫-—ç–º–∏—Ç–µ–Ω—Ç –∫–∞—Ä—Ç—ã,
- –µ–≥–æ ID,
- –≤–∞–ª—é—Ç—É –±–∞–Ω–∫–∞,
- –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≤–∞–ª—é—Ç—ã –∫–∞—Ä—Ç—ã –∏ –≤–∞–ª—é—Ç—ã –±–∞–Ω–∫–∞.

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–¥–∞—ë—Ç **–Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã** (`requisite`) –∏ **–≤–∞–ª—é—Ç—É** (`currency`).
2. –°–µ—Ä–≤–∏—Å –∏–∑–≤–ª–µ–∫–∞–µ—Ç BIN (–ø–µ—Ä–≤—ã–µ 6 —Ü–∏—Ñ—Ä).
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–∞–Ω–Ω—ã–µ:
   - –≤ –±–∞–∑–µ (`PostgreSQL`);
   - –≤ –∫–µ—à–µ (`Redis`);
   - –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –≤–Ω–µ—à–Ω–µ–º—É API **apilayer/bincheck**;
   - —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ BIN –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–¥–≥—Ä—É–∂–µ–Ω –≤—Ä—É—á–Ω—É—é —Å [bintable.com](https://bintable.com/country/ru?page=1).
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
   - ‚úÖ –£—Å–ø–µ—Ö ‚Äî –µ—Å–ª–∏ –≤–∞–ª—é—Ç–∞ —Å–æ–≤–ø–∞–ª–∞ —Å –≤–∞–ª—é—Ç–æ–π –±–∞–Ω–∫–∞;
   - ‚ùå –û—à–∏–±–∫—É ‚Äî –µ—Å–ª–∏ –≤–∞–ª—é—Ç–∞ –∏–ª–∏ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç.

---

## ‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.11+**
- **FastAPI** ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è API.
- **SQLAlchemy (async)** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å PostgreSQL.
- **httpx** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –≤–Ω–µ—à–Ω–µ–º—É API.
- **Redis (aioredis)** ‚Äî –∫—ç—à BIN-–∫–æ–¥–æ–≤.
- **PostgreSQL** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö.
- **Pydantic** ‚Äî —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö.
- **Uvicorn** ‚Äî ASGI-—Å–µ—Ä–≤–µ—Ä.
- **Docker + docker-compose** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
main.py
.env.example
requirements.txt
docker-compose.yml
Dockerfile
api/
 ‚îú‚îÄ‚îÄ config.py
 ‚îú‚îÄ‚îÄ db/
 ‚îÇ   ‚îú‚îÄ‚îÄ banks.json
 ‚îÇ   ‚îî‚îÄ‚îÄ database.py
 ‚îú‚îÄ‚îÄ models/
 ‚îÇ   ‚îî‚îÄ‚îÄ model.py
 ‚îú‚îÄ‚îÄ routes/
 ‚îÇ   ‚îú‚îÄ‚îÄ get_bank_from_api.py
 ‚îÇ   ‚îî‚îÄ‚îÄ get_bank_from_bintable.py
 ‚îú‚îÄ‚îÄ schemas/
 ‚îÇ   ‚îî‚îÄ‚îÄ method_names.py
 ‚îî‚îÄ‚îÄ services/
     ‚îú‚îÄ‚îÄ dao.py
     ‚îú‚îÄ‚îÄ get_bank_from_api.py
     ‚îú‚îÄ‚îÄ get_bank_from_bintable.py
     ‚îú‚îÄ‚îÄ get_bank_from_db.py
     ‚îú‚îÄ‚îÄ get_bank_from_redis.py
     ‚îî‚îÄ‚îÄ banks.py
```

---

## üê≥ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:

```ini
# API Key –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
API_KEY=<–≤–∞—à_apilayer_api_key>

# PostgreSQL
POSTGRES_DB_HOST=db
POSTGRES_DB_PORT=5432
POSTGRES_DB_USER=postgres
POSTGRES_DB_PASS=postgres
POSTGRES_DB_NAME=testdb

# Redis
REDIS_HOST=redis
REDIS_PORT=6379
```

### 2. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
docker-compose up --build
```

### 3. –î–æ—Å—Ç—É–ø
- API ‚Üí [http://localhost:8000](http://localhost:8000)
- PostgreSQL ‚Üí `localhost:${POSTGRES_DB_PORT}`
- Redis ‚Üí `localhost:${REDIS_PORT}`

---

## üì° API Endpoints

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π API
```
GET /bank_api?requisite=<–Ω–æ–º–µ—Ä_–∫–∞—Ä—Ç—ã>&currency=<–≤–∞–ª—é—Ç–∞>
```

‚úÖ –£—Å–ø–µ—Ö:
```json
{
  "success": true,
  "result": {
    "id": 1,
    "name": "–°–±–µ—Ä–±–∞–Ω–∫",
    "currency": "RUB"
  }
}
```

‚ùå –û—à–∏–±–∫–∞:
```json
{
  "success": false,
  "result": {
    "requisite": "4276381234567890"
  },
  "detail": "–ù–µ–≤–µ—Ä–Ω–∞—è –≤–∞–ª—é—Ç–∞"
}
```

---

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Redis + DB (–±–µ–∑ –≤–Ω–µ—à–Ω–µ–≥–æ API)
```
GET /bank_bintable_redis?requisite=<–Ω–æ–º–µ—Ä_–∫–∞—Ä—Ç—ã>&currency=<–≤–∞–ª—é—Ç–∞>
```

---

## üß∞ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –í–Ω–µ—à–Ω–∏–π API –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –ø–æ —á–∏—Å–ª—É –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Üí –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±.
- BIN-—Ç–∞–±–ª–∏—Ü–∞ –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –≤—Ä—É—á–Ω—É—é –ø–æ–º–æ—â–Ω–∏–∫–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å —Å–∞–π—Ç–∞ bintable.com).

---